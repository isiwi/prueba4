<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="mitema5.min.css">
<link rel="stylesheet" href="jquery.mobile.icons.min.css">
<!--<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">-->
<link rel="stylesheet" href="jquery.mobile.structure-1.4.5.min.css">
<!--<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">-->
<script src="jquery.min.js"></script>
<script src="jquery.mobile-1.4.5.min.js"></script>

<script >


$(document).ready(
function()
{
    db=window.openDatabase("RECETARIO","1.0","DESCRIPCION",200000);
	db.transaction(CREATE, errorDB, bienDB);
}
);

function CREATE(tx){
	//ASIGNAR INTEGER TEXT
   tx.executeSql("CREATE TABLE IF NOT EXISTS RECETA(nombre_receta TEXT,ingredientes TEX,procedimiento_receta TEXT)");
   //tx.executeSql("CREATE TABLE IF NOT EXISTS INGREDIENTES(nombre_receta TEXT,nombre_ingrediente TEXT,descripcion TEXT);");
 }
	
function bienDB(){
   // window.alert("CREADA BD");
	//grabar_receta();
}
function errorDB(){
    window.alert("error bd");
}
</script>

</head>
<body >

<div data-role="page" data-theme="a">
  <div data-role="panel" id="myPanel" data-theme="a" >
    <h2>Recetas</h2>
	
	<h3>Titulo</h3>
    <p id="Titulo"></p>
	
	<h3>Ingredientes</h3>
	 <div align="left" id="ingredientes"></div>
	<h3>Procedimiento</h3>	 
	 <div aling="center" id="procedimiento"></div>
	
  </div>

  <div data-role="header" data-theme="a">
   <h1></h1> 
  </div>

  <div data-role="main" class="ui-content" id="main" data-theme="a">
        		
		  <div id="principal" style="text-align:center;" class="div-img" >
		   <h1>KITFROG</h1>
		   <img src="receta3.jpg" onclick="enviar_crear()" id="portada" class="img" >
		  </div>   

   <div data-role="collapsible" id="crear" data-theme="a">
	  <h1>Agregar Receta</h1>
	  <form id="menu2">
	  <label for="text-basic">Nombre Receta:</label>
        <input type="text" name="nombre_receta" id="nombre_receta" value="">
	  <label for="text-basic">Ingredientes:</label>
        <input type="text" name="nombre_ingrediente" id="nombre_ingrediente" value="">
		<!--<a href="#" class="ui-shadow ui-btn ui-corner-all ui-btn-inline ui-icon-plus ui-btn-icon-notext ui-btn-b ui-mini" id="btn" 
		>icon only button</a>-->
	  <label for="textarea">Procedimiento:</label>
        <textarea cols="40" rows="8" name="comment" id="comment" data-clear-btn="true"></textarea>
		
		
	  </form><input type="submit" data-inline="true" value="Guardar" onclick="grabar_receta()">
	  <p></p>
	</div>
   <div data-role="collapsible" id="listar" data-theme="a">
	  <h1>Ver Recetas Receta</h1>
  
    <a href="#myPanel" class="ui-btn ui-btn-inline ui-corner-all ui-shadow"
	onclick="queryDB();">Ver Receta</a>

	  <p></p>
	</div>
	
  </div>

  <div data-role="footer" data-theme="a">
    <h1>Aplicacion</h1>
  </div>
</div>

<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body>
<script type="text/javascript">
var db;
 $("#crear").hide();
 $("#listar").hide();
function enviar_crear(){
         $("#principal").hide(); 
		 $("#crear").show();
		 $("#listar").show();

}
function grabar_receta()
{

    var nombre        = document.getElementById("nombre_receta").value;  
	var ingrediente   = document.getElementById("nombre_ingrediente").value;  
    var procedimiento = document.getElementById("comment").value;
    db.transaction
    (
        function(tx)
        {
           tx.executeSql("INSERT INTO RECETA(nombre_receta,ingredientes,procedimiento_receta)VALUES('" + nombre +"','"+ ingrediente +"','"+ procedimiento +"');"); 
        },errorInsert,exitoInsert); 
		
}

function errorInsert()
{
    window.alert("error insert");
}

function exitoInsert()
{ 
    
    //window.location="index.html";
	//$("#menu2").refresh();
	 $('#menu2').each (function(){
		this.reset();
	 });
	
    window.alert("Datos Guardados Correctamente");
	
	
}


function queryDB() {


        db.transaction(function(tx){
			// AS HOLA    !!!!!!
            tx.executeSql("SELECT * FROM receta",[],exitoDB);
        },errorSelect);   


}

function exitoDB(tx, results) {
            var rows = results.rows;
			for(var i=0;i<rows.length;i++){
			var nombre        =    results.rows.item(i);
			var ingrediente   =    results.rows.item(i);
			var detalle       =    results.rows.item(i);
			
			document.getElementById("Titulo").innerHTML = nombre.nombre_receta; 
			document.getElementById("ingredientes").innerHTML = ingrediente.ingredientes;
			document.getElementById("procedimiento").innerHTML = detalle.procedimiento_receta; 

			}
}
function errorSelect(error) {
    alert("Error processing SQL: "+error);
}

$(document).ready(function(){
	var contador=1;
	var cont=contador+1;

		$("#btn").click(function(){
			$("#menu2").append('<input type="text" name="number" id="ingrediente'+cont+'" value="">');
			cont++;

	});
});




/*function parpadeo() {
var imagen = document.images["portada"];
imagen.style.visibility = (imagen.style.visibility == "visible") ? "hidden" : "visible";
}
setInterval("parpadeo()", 800);*/

</script>
</html>
